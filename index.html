<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <title>diffHTML</title>

    <link rel="stylesheet" href="prism.css">
    <link rel="stylesheet" href="codemirror.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="favorite-movies-chart.css">

    <!--
    <script src="https://use.typekit.net/xze5bef.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    -->
  </head>
  <body>
    <aside>
      <a href="http://github.com/tbranyen/diffhtml">
        <h1><img width="20%" src="kiwi.png">diffHTML</h1>
        <span>GitHub Repository</span>
      </a>

      <nav>
        <h4>Basics</h4>
        <hr>
        <a href="#about">About</a>
        <a href="#installing">Installing</a>

        <h4>API</h4>
        <hr>
        <a href="#outer-html">outerHTML</a>
        <a href="#inner-html">innerHTML</a>
        <a href="#element">element</a>
        <a href="#add-transition-state">addTransitionState</a>
        <a href="#remove-transition-state">removeTransitionState</a>
        <a href="#enable-prollyfil">enableProllyfill</a>

        <h5>Transitions</h5>
        <hr>
        <a href="#attached-transition">attached</a>
        <a href="#detached-transition">detached</a>
        <a href="#attribute-changed-transition">attributeChanged</a>

        <h5>Custom Elements</h5>
        <hr>
        <a href="#created-callback">createdCallback</a>
        <a href="#attached-callback">attachedCallback</a>
        <a href="#detached-callback">detachedCallback</a>
        <a href="#attribute-changed-callback">attributeChangedCallback</a>
        <a href="#text-changed-callback">textChangedCallback</a>

        <h4>Demos</h4>
        <hr>
        <a href="#live-template">Live template</a>
        <a href="#simple-bar-chart">Simple Bar Chart</a>
        <a href="#lite-brite">Lite Brite</a>
      </nav>
    </aside>

    <main>
      <p>
        <strong>
        Site is currently a work in progress, I'm pushing chnages directly live
        and adding content when I can.
        </strong>
      </p>

      <p class="bump">
        Allows you to easily swap out markup and have an intelligent virtual diff
        patch in the changes.
      </p>

      <pre class="language-javascript code"><code>diff.innerHTML(document.body, '&lt;h1&gt;new markup to change&lt/h1&gt;');</code></pre>
      <p>
      Contrast to innerHTML that blows everything away
        when set.
      </p>

      <hr>

      <h2 id="about">About</h2>
      <p>
        Inspired by React and motivated by the Web, this is a low-level tool which aims
        to help web developers write applications. By focusing on the markup
        representing how your application state should look, diffHTML will figure out
        how to modify the page with the fewest amount of operations.

        <h5>Features:</h5>

        <ul>
          <li>Intelligent virtual DOM diffing and patching of HTML text and elements.</li>
          <li>Transitions API to hook into element and attribute state changes.</li>
          <li>Custom Elements in browsers without native support.</li>
          <li>Offloading diff to Web Workers which provides better rendering performance.</li>
          <li>Object pooling to avoid GC thrashing and expensive uuid generation.</li>
        </ul>
      </p>

      <h2 id="installing">Installing</h2>

      <p>
        You can easily install by downloading the <a href="https://raw.githubusercontent.com/tbranyen/diffhtml/master/dist/diffhtml.js">latest prebuilt JavaScript
        distribution</a> or by using NPM:

        <pre class="language-javascript"><code>npm install diffhtml</code></pre>

        Distributions are commited into the repository, so you can point your
        package.json to a specific hash if you wish to lock or test a specific
        version. This is useful for testing out bug fixes or future releases.

      </p>
      
      <p>
        Example:

        <pre class="language-javascript"><code>{
  "dependencies": {
    "diffhtml": "tbranyen/diffhtml#master"
  }
}</code></pre>
      </p>

      <hr>

      <h2 id="outer-html">outerHTML</h2>

      This method diffs an element, including its own tag with markup.

      <p>
        This method will take in a string of markup that matches the element root you
        are diffing against.  This allows you to change attributes and text on the
        main element.  This also allows you to change the <code>document.documentElement<code>.
      </p>

      <p>
      An example below shows how you could set the page state using markup
      representing the entire page:
      </p>

      <pre class="language-javascript"><code>
import diff from 'diffhtml';

diff.outerHTML(document.documentElement, `
  &lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;New Title&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;h1&gt;Hello world!&lt;/h1&gt;
    &lt;/body&gt;
  &lt;/html&gt;
`);
      </code></pre>

      Not all uses of <code>outerHTML</code> involve the entire page, you may
      want to use on a single element when writing a Custom Element class.

      <pre class="language-javascript"><code>
import diff from 'diffhtml';

class MyCustomElement extends HTMLElement {
  attachedCallback() {
    this.render();
  }

  render() {
    diff.outerHTML(this, `
      &lt;my-custom-element&gt;
        &lt;h1&gt;${this.msg}&lt;/h1&gt;
      &lt;/my-custom-element&gt;
    `)
  }
}

document.registerElement('my-custom-element', MyCustomElement);
      </code></pre>

      <hr>

      <h2 id="inner-html">innerHTML</h2>

      This method diffs an element, including its own tag with markup.

      <p>
        This method will take in a string of markup that matches the element root you
        are diffing against.  This allows you to change attributes and text on the
        main element.  This also allows you to change the <code>document.documentElement<code>.
      </p>

      <p>
      An example below shows how you could set the page state using markup
      representing the entire page:
      </p>

      <pre class="language-javascript"><code>
import diff from 'diffhtml';

diff.outerHTML(document.documentElement, `
  &lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;New Title&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;h1&gt;Hello world!&lt;/h1&gt;
    &lt;/body&gt;
  &lt;/html&gt;
`);
      </code></pre>

      <hr>

      <h2 id="live-template">Live template</h2>

      <div class="example">
        <p>
          Feel free to change the markup and JSON data below.  The output will
          update automatically with the changes.
        </p>

        <output></output>

        <div class="demo" style="clear: both;">
          <pre class="language-handlebars editor"></pre>
          <pre class="language-javascript json"></pre> 

          <button class="run-animation">Run animation</button>
        </div>
      </div>

      <hr>

      <h2 id="simple-bar-chart">Simple Bar Chart</h2>

      <button class="re-render">Randomize and re-render the chart</button>

      <favorite-movies-chart width="100%"></favorite-movies-chart>

      <hr>

      <h2 id="lite-brite">Lite Brite</h2>

      <hr>

      <script src="prism.js"></script>
      <script src="codemirror.js"></script>
      <script src="mustache.js"></script>
      <script src="demos/dist/diffhtml.js"></script>
      <script src="docs.js"></script>
      <script src="favorite-movies-chart.js"></script>

      <footer>
        <p>MIT License 2015, Tim Branyen (<a href="https://twitter.com/tbranyen">@tbranyen</a>)</p>
      </footer>
    </main>
  </body>
</html>
